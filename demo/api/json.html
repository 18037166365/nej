<!DOCTYPE html>
<html>
  <head>
    <title>test json</title>
    <meta charset="utf-8"/>
  </head>
  <body>
    <textarea id="abc"></textarea>
    <div id="xyz"></div>
    <input type="button" value="parse" id="efg"/>
    <script src="../../src/define.js?pro=./"></script>
    <script>
      define(['{patch}json.js',
              '{lib}base/event.js',
              '{lib}base/element.js'],
      function(){
          
          function log(msg){
              var p = document.createElement('p');
              p.innerText = msg;
              document.body.appendChild(p);
          }
          
          nej.v._$addEvent(
              'efg','click',function(){
                  nej.e._$get('xyz').innerText = nej.e._$get('abc').value.replace(/\n/g,'\\n');
                  console.log(nej.e._$get('xyz').innerText);
                  log(JSON.parse(nej.e._$get('xyz').innerText));
              }
          );
      });
    </script>
  </body>
</html>