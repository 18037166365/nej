<!DOCTYPE html>
<html>
  <head>
    <title>test playlist</title>
    <meta charset="utf-8"/>
    <script>
        function log(m){
            var p = document.createElement('p');
            p.innerHTML = m;
            document.body.appendChild(p);
        }
    </script>
  </head>
  <body>
    <input type="button" value="next" id="next"/>
    <input type="button" value="prev" id="prev"/>
    <select id="mode">
      <option value="0">列表循环</option>
      <option value="1">单曲循环</option>
      <option value="2">随机播放</option>
    </select>
    <script src="../../../src/define.js?pro=./"></script>
    <script>
        define(['{lib}base/event.js',
                '{lib}util/media/playlist.js'],
        function(){
            var _playlist = nej.ut._$$PlayList._$allocate({
                mode:2,
                list:[
                    {id:0,url:'a.mp3'},
                    {id:1,url:'b.mp3'},
                    {id:2,url:'c.mp3'},
                    {id:3,url:'d.mp3'},
                    {id:4,url:'e.mp3'},
                    {id:5,url:'f.mp3'}
                ],
                onmodechange:function(_event){
                    log('mode change -> '+_event.mode);
                },
                onmediachange:function(_event){
                    log('media change -> '+JSON.stringify(_event.list[_event.index]));
                }
            });
            nej.v._$addEvent(
                'next','click',function(){
                    _playlist._$next();
                }
            );
            nej.v._$addEvent(
                'prev','click',function(){
                    _playlist._$prev();
                }
            );
            nej.v._$addEvent(
                'mode','change',function(){
                    _playlist._$setPlayMode(
                        nej.e._$get('mode').value
                    );
                }
            );
        });
    </script>
  </body>
</html>